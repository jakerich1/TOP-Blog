(this["webpackJsonptop-blog"]=this["webpackJsonptop-blog"]||[]).push([[0],{55:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(27),s=n.n(c),o=n(9),u=n(4),i=n(3),l=n.n(i),p=n(5),d=n(2),j=n(0),b=n(10).default,h=Object(a.createContext)(),m=function(){return Object(a.useContext)(h)};function O(e){var t=e.children,n=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],u=s[1],i=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("https://top-blog-jr.herokuapp.com/auth/login",{username:t,password:n});case 3:return a=e.sent,r(!0),u(a.data),localStorage.setItem("jwt-fe",a.data),e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(l.a.mark((function e(t,n,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.post("https://top-blog-jr.herokuapp.com/auth/signup",{username:t,displayname:n,password:a});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response){e.next=11;break}return e.abrupt("return",e.t0.response.data);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("https://top-blog-jr.herokuapp.com/user/profile",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-fe"))}});case 3:r(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return{user:n,jwt:o,signin:i,signup:j,signout:function(){r(!1),u(""),localStorage.removeItem("jwt-fe")},checkAuth:h}}();return Object(j.jsx)(h.Provider,{value:n,children:t})}n(55);var f=function(){var e=m(),t=Object(u.f)(),n=Object(a.useState)([]),r=Object(d.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(!1),i=Object(d.a)(o,2),b=i[0],h=i[1],O=Object(a.useState)("Login"),f=Object(d.a)(O,2),v=f[0],x=f[1],g=function(e){x(e)},w=Object(a.useState)(""),k=Object(d.a)(w,2),y=k[0],S=k[1],N=Object(a.useState)(""),C=Object(d.a)(N,2),D=C[0],I=C[1],L=Object(a.useState)(""),q=Object(d.a)(L,2),P=q[0],A=q[1],E=Object(a.useState)(""),F=Object(d.a)(E,2),B=F[0],z=F[1],K=Object(a.useState)(""),T=Object(d.a)(K,2),H=T[0],J=T[1],M=Object(a.useState)(""),_=Object(d.a)(M,2),Z=_[0],G=_[1],Q=function(){var e=[];return 0===y.length&&e.push("Email must be provided"),0===D.length&&e.push("Password must be provided"),e.length?(s(e),!0):(s([]),!1)},R=function(){var e=[];return 0===P.length&&e.push("Email must be provided"),P.length>128&&e.push("Email character count of 128 exceeded"),0===B.length&&e.push("Displayname must be provided"),B.length>128&&e.push("Displayname character count of 128 exceeded"),0===H.length&&e.push("Password must be provided"),H.length>128&&e.push("Password character count of 128 exceeded"),/\d/.test(H)||e.push("Password must contain at least 1 number"),/[a-z]/.test(H)||e.push("Password must contain at least one lowercase letter"),/[A-Z]/.test(H)||e.push("Password must contain at least one uppercase letter"),H!==Z&&e.push("Passwords do not match"),e.length?(s(e),!0):(s([]),!1)},U=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!Q()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.signin(y,D);case 5:"object"===typeof(a=t.sent)&&s([a.message]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!R()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.signup(P,B,H);case 5:if("object"!==typeof(a=t.sent)){t.next=9;break}return s([a]),t.abrupt("return");case 9:if("Email already in use"!==a){t.next=12;break}return s([a]),t.abrupt("return");case 12:x("Login"),h(!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){e.checkAuth()}),[e]),Object(a.useEffect)((function(){e.user&&t.push("/")}),[e.user,t]),Object(j.jsx)("div",{className:"login-wrap",children:Object(j.jsxs)("main",{children:[Object(j.jsxs)("div",{className:"main-head",children:[Object(j.jsxs)("h1",{children:[v," ","Form"]}),Object(j.jsx)("h2",{style:{color:"#1db643"},children:b?"Account created!":""})]}),Object(j.jsxs)("div",{className:"toggle",children:[Object(j.jsx)("div",{role:"button",onClick:function(){g("Login")},onKeyDown:function(){g("Login")},className:"tog-option ".concat("Login"===v?"active":""),children:"login"}),Object(j.jsx)("div",{role:"button",onClick:function(){g("Signup")},onKeyDown:function(){g("Login")},className:"tog-option ".concat("Signup"===v?"active":""),children:"signup"})]}),Object(j.jsxs)("form",{onSubmit:U,style:{display:"Login"===v?"block":"none"},className:"login",children:[Object(j.jsx)("input",{type:"email",onInput:function(e){S(e.target.value)},value:y,name:"email",placeholder:"email",required:"required"}),Object(j.jsx)("input",{type:"password",onInput:function(e){I(e.target.value)},value:D,name:"password",placeholder:"password",required:"required"}),Object(j.jsx)("button",{type:"submit",children:"Login"})]}),Object(j.jsxs)("form",{onSubmit:V,style:{display:"Signup"===v?"block":"none"},className:"signup",children:[Object(j.jsx)("input",{type:"email",onInput:function(e){A(e.target.value)},value:P,name:"email",placeholder:"email",required:"required"}),Object(j.jsx)("input",{type:"text",onInput:function(e){z(e.target.value)},value:B,name:"displayname",placeholder:"display name",required:"required"}),Object(j.jsx)("input",{type:"password",onInput:function(e){J(e.target.value)},value:H,name:"password",placeholder:"password",required:"required"}),Object(j.jsx)("input",{type:"password",onInput:function(e){G(e.target.value)},value:Z,name:"password",placeholder:"confirm password",required:"required"}),Object(j.jsx)("button",{type:"submit",children:"Signup"})]}),Object(j.jsx)("div",{className:"errors",children:Object(j.jsx)("ul",{children:c.map((function(e,t){return Object(j.jsxs)("li",{children:["*",e," ","*"]},t)}))})})]})})},v=(n(63),n(12)),x=n.n(v);n(65);var g=function(e){var t=Object(u.f)(),n=function(){t.push("/post/".concat(e.id))};return Object(j.jsx)("div",{role:"button",onClick:n,onKeyDown:n,className:"post",children:Object(j.jsxs)("div",{className:"post-content",children:[Object(j.jsxs)("div",{className:"content-header",children:[Object(j.jsx)("div",{className:"post-title",children:e.title}),Object(j.jsx)("div",{className:"post-date",children:function(e){var t=Date.parse(e);return new Date(t).toLocaleString()}(e.timestamp)})]}),Object(j.jsx)("div",{className:"post-content-area",children:x.a.decode(e.content)})]})})},w=n(10).default;var k=function(){var e=m(),t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(1),u=Object(d.a)(s,2),i=u[0],b=u[1],h=Object(a.useState)({all:0,published:0,unpublished:0,pages:0}),O=Object(d.a)(h,2),f=(O[0],O[1]),v=Object(a.useState)([]),x=Object(d.a)(v,2),k=x[0],y=x[1],S=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("https://top-blog-jr.herokuapp.com/posts?page=".concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:n=e.sent,c(n.data),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("https://top-blog-jr.herokuapp.com/posts/info");case 3:for((t=e.sent).data.unpublished=t.data.all-t.data.published,t.data.pages=Math.ceil(t.data.all/10),n=[],a=1;a<t.data.pages+1;a++)n.push(a);y(n),f(t.data),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){S(i),N(),e.checkAuth()}),[i,e]),Object(j.jsx)("div",{className:"dash-wrap",children:Object(j.jsxs)("div",{className:"inner-wrap",children:[Object(j.jsxs)("header",{children:[Object(j.jsx)("h1",{children:"Home"}),e.user?Object(j.jsx)("button",{type:"button",onClick:e.signout,children:"sign out"}):Object(j.jsx)(o.b,{to:"/login",children:Object(j.jsx)("button",{type:"button",onClick:e.signout,children:"Log In"})})]}),Object(j.jsx)("main",{children:Object(j.jsxs)("div",{className:"post-area",children:[Object(j.jsx)("div",{className:"post-section",children:r.map((function(e){return Object(j.jsx)(g,{id:e._id,title:e.title,content:e.content,timestamp:e.timestamp},e._id)}))}),Object(j.jsx)("div",{className:"post-nav",children:k.map((function(e,t){return Object(j.jsx)("div",{className:"nav-li",onClick:function(){return b(e)},onKeyDown:function(){return b(e)},style:{background:e===i?"white":"none",color:e===i?"#FF416C":"white"},children:e},t)}))})]})})]})})},y=n(10),S=n.n(y);n(66);var N=function(e){return Object(j.jsxs)("div",{className:"comment",children:[Object(j.jsxs)("div",{className:"comment-head",children:[Object(j.jsx)("h3",{children:e.displayname}),Object(j.jsx)("div",{className:"comment-date",children:function(e){var t=Date.parse(e);return new Date(t).toLocaleString()}(e.date)})]}),Object(j.jsx)("div",{className:"comment-content",children:e.content})]})};n(67);var C=function(){var e=m(),t=Object(u.g)().id,n=Object(a.useState)(""),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),b=Object(d.a)(i,2),h=b[0],O=b[1],f=Object(a.useState)(""),v=Object(d.a)(f,2),g=v[0],w=v[1],k=Object(a.useState)([]),y=Object(d.a)(k,2),C=y[0],D=y[1],I=Object(a.useState)(!1),L=Object(d.a)(I,2),q=L[0],P=L[1],A=Object(a.useState)(""),E=Object(d.a)(A,2),F=E[0],B=E[1],z=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,S.a.get("https://top-blog-jr.herokuapp.com/posts/".concat(t,"/comments"));case 5:n=e.sent,D(n.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,S.a.post("https://top-blog-jr.herokuapp.com/posts/".concat(t,"/comments"),{content:F},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-fe"))}});case 4:z(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,S.a.get("https://top-blog-jr.herokuapp.com/posts/".concat(t));case 5:n=e.sent,s(n.data.title),O(n.data.content),w(n.data.timestamp),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();e(),z()}),[t]),Object(a.useEffect)((function(){e.checkAuth()}),[e]),Object(j.jsx)("div",{className:"create-wrap",children:Object(j.jsxs)("div",{className:"inner-wrap",children:[Object(j.jsxs)("header",{children:[Object(j.jsx)("h1",{children:"Post"}),e.user?Object(j.jsx)("button",{type:"button",onClick:e.signout,children:"sign out"}):Object(j.jsx)(o.b,{to:"/login",children:Object(j.jsx)("button",{type:"button",onClick:e.signout,children:"Log In"})})]}),Object(j.jsx)("div",{className:"post",children:Object(j.jsxs)("div",{className:"post-content",children:[Object(j.jsxs)("div",{className:"content-header",children:[Object(j.jsx)("div",{className:"post-title",children:c}),Object(j.jsx)("div",{className:"post-date",children:function(e){var t=Date.parse(e);return new Date(t).toLocaleString()}(g)})]}),Object(j.jsx)("div",{className:"post-content-area",children:x.a.decode(h)})]})}),Object(j.jsx)("h2",{children:"Comments"}),e.user?Object(j.jsx)("button",{type:"button",onClick:function(){P(!q)},children:"Add comment"}):"",Object(j.jsx)("div",{style:{display:q?"block":"none"},className:"comment-form",children:Object(j.jsxs)("form",{onSubmit:K,children:[Object(j.jsx)("textarea",{onInput:function(e){e.target.style.height="5px",e.target.style.height="".concat(e.target.scrollHeight,"px"),B(e.target.value)},value:F,placeholder:"Comment here"}),Object(j.jsx)("button",{type:"submit",children:"submit"})]})}),Object(j.jsx)("div",{className:"comment-cont",children:C.map((function(e){return Object(j.jsx)(N,{displayname:e.user.displayname,date:e.timestamp,content:e.content},e.id)}))})]})})};var D=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{path:"/login",children:Object(j.jsx)(f,{})}),Object(j.jsx)(u.a,{exact:!0,path:"/Dashboard",children:Object(j.jsx)(k,{})}),Object(j.jsx)(u.a,{exact:!0,path:"/",children:Object(j.jsx)(k,{})}),Object(j.jsx)(u.a,{exact:!0,path:"/post/:id",children:Object(j.jsx)(C,{})})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(68);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(o.a,{basename:"/TOP-Blog",children:Object(j.jsx)(O,{children:Object(j.jsx)(D,{})})})}),document.getElementById("root")),I()}},[[69,1,2]]]);
//# sourceMappingURL=main.9724020b.chunk.js.map